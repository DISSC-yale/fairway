# Project Rules

## Apptainer Templates
- **Variable Definitions**: `Apptainer.def` templates MUST define necessary build variables (e.g., `SPARK_VERSION`, `HADOOP_VERSION`) within the `%post` section before they are used.
- **Single Source of Truth**: `src/fairway/templates.py` should read the `Apptainer.def` content from `src/fairway/data/Apptainer.def` using `_read_data_file` to ensure consistency.

## Version Consistency
- **Spark Version**: Ensure the Spark version is consistent across all configuration files:
    - `pyproject.toml`
    - `src/fairway/data/Apptainer.def`
    - `src/fairway/data/fairway-hpc.sh` (or generated scripts)
